<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aplikasi Siswa Bahasa Jepang</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="top-header">
  <div class="header-inner">

    <div class="logo-wrap">
      <img src="img/logo.png" alt="Logo Zak Nihongo" class="logo">
    </div>

    <div class="header-text">
      <h1>Siswa Bahasa Jepang</h1>
      <p class="subtitle">Kursus Bahasa Jepang Zak Nihongo</p>
      <p class="desc">JLPT â€¢ JFT â€¢ SSW</p>
      <p class="contact">
    ğŸ“ 
<a href="https://www.google.com/maps?q=-6.3454838,107.0435349"
   onclick="window.open(this.href, '_system'); return false;">
  Setu, Bekasi
</a>
<br>

ğŸ“ WA:
<a href="https://wa.me/6281905943944"
   onclick="window.open(this.href, '_system'); return false;">
  0819-0594-3944
</a>
      </p>
    </div>

  </div>
  
</header>
<section class="card" id="loginSection">
  <h2>ğŸ” Login Akun</h2>

  <input id="loginEmail" type="email" placeholder="Email">
  <input id="loginPassword" type="password" placeholder="Password">

  <button onclick="loginUser()">Masuk</button>

  <p style="text-align:center;margin-top:10px">
    <small>Gunakan akun yang diberikan oleh Sensei</small>
  </p>
</section>

<!-- KONTEN SETELAH LOGIN -->
<div id="appContent">

  <!-- logout -->
 <div class="logout-bar">
  <button class="btn-logout" onclick="logout()">ğŸšª Logout</button>
</div>

<section class="card" id="dashboard">
 <h2 class="section-title">
  ğŸ“Š Dashboard Siswa
</h2>

 <div class="info-grid">
  <div class="info-box">ğŸ‘¤ <b>Nama</b><br><span id="dashNama">-</span></div>
  <div class="info-box">ğŸ¯ <b>Level</b><br><span id="dashLevel">-</span></div>
  <div class="info-box">ğŸ <b>Target</b><br><span id="dashTarget">-</span></div>
</div>
  
  <hr>
  <p><strong>ğŸ“š Progres Belajar</strong></p>
  <p>
    <span id="dashMateriSelesai">0</span> /
    <span id="dashMateriTotal">0</span> materi selesai
  </p>
  <div class="progress-bar">
    <div id="dashProgress"></div>
  </div>
  <hr>
  <p><strong>ğŸ« Kursus Hari Ini</strong></p>
  <ul id="dashKursusHariIni"></ul>
  <hr>
  <p><strong>ğŸ“¢ Pengumuman Terbaru</strong></p>
  <p id="dashPengumuman">Tidak ada pengumuman</p>
</section>
<section class="card">
  <h2>ğŸ‘¤ Data Siswa</h2>
  <input id="nama" placeholder="Nama Siswa">
  <select id="level">
    <option>JLPT N5</option>
    <option>JLPT N4</option>
    <option>JLPT N3</option>
    <option>JLPT N2</option>
    <option>JLPT N1</option>
    <option>JFT-Basic</option>
    <option>SSW</option>
  </select>
  <input id="target" placeholder="Target Ujian (opsional)">
  <button onclick="simpanSiswa()">Simpan</button>
</section>

<section class="card">
  <h2>ğŸ“… Jadwal Belajar</h2>
  <input id="jadwalInput" placeholder="Contoh: Senin - Kanji N5">
  <button onclick="tambahJadwal()">Tambah</button>
  <ul id="listJadwal"></ul>
</section>

<section class="card">
  <h2>ğŸ“š Materi Belajar</h2>
  <input id="materiInput" placeholder="Judul Materi">
  <select id="jenis">
    <option>Kosakata</option>
    <option>Tata Bahasa</option>
    <option>Kanji</option>
    <option>Listening</option>
    <option>Reading</option>
  </select>
  <button onclick="tambahMateri()">Tambah</button>
  <ul id="listMateri"></ul>
</section>

<section class="card">
  <h2>ğŸ“ˆ Progres Belajar</h2>
  <p id="progresText">0% selesai</p>
  <div class="progress-bar">
    <div id="progress"></div>
  </div>
</section>

<section class="card">
  <h2>ğŸ« Jadwal Kursus</h2>

  <input id="kursusNama" placeholder="Nama Kursus (contoh: JLPT N4)">
  <input type="date" id="kursusTanggal">
  <input type="time" id="kursusJam">
  <input id="kursusPengajar" placeholder="Nama Pengajar">
  <input id="kursusKelas" placeholder="Nama Kelas (opsional)">

  <button onclick="tambahKursus()">Tambah Kursus</button>

  <ul id="listKursus"></ul>
</section>
  
  <section class="card guru-only">
  <!-- Pengumuman & PDF -->
</section>

<section class="card guru-only">
  <h2>ğŸ“¢ Pengumuman Sensei</h2>

  <textarea id="pengumumanInput" placeholder="Tulis pengumuman atau perubahan jadwal..." rows="3"></textarea>
  <button onclick="tambahPengumuman()">Kirim Pengumuman</button>

  <ul id="listPengumuman"></ul>
</section>

<section class="card">
  <h2>ğŸ“„ Materi PDF</h2>
 <ul id="listPDF" class="pdf-list"></ul>

  <p style="font-size:0.9em;color:#555">
    Upload PDF ke Google Drive â†’ set <b>Anyone with link</b> â†’ paste link di bawah
  </p>

   <div class="guru-only">
  <input id="pdfJudul" placeholder="Judul PDF (contoh: JLPT N4 Kanji)">
  <input id="pdfLink" placeholder="Link Google Drive PDF">
  <button onclick="uploadPDF()">â• Tambah PDF</button>
  </div>
</section>

 
<section class="card">
  <h2>ğŸ’¾ Backup & Restore Data</h2>

  <button onclick="backupData()">
    ğŸ“„ Backup ke File
  </button>

  <button onclick="restoreFromAndroid()" style="margin-top:10px">
    ğŸ“‚ Restore dari File (HP)
  </button>

  <input
    type="file"
    accept=".json"
    onchange="restoreFromFile(this)"
    style="margin-top:10px"
  >

  <p style="font-size:0.85em;color:#666">
    Desktop: gunakan file picker<br>
    Android: gunakan tombol restore HP
  </p>
</section>

  
<script>
  // =========================
  // BACKUP (DESKTOP + ANDROID)
  // =========================
function backupData() {
  const json = JSON.stringify(localStorage);

  const blob = new Blob([json], { type: "application/json" });
  const url = URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  a.download = "backup_test.json";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);

  URL.revokeObjectURL(url);
}
</script>

 <div id="popupPengumuman" class="popup hide">
  <div class="popup-box">

    <!-- ğŸ”½ TEMPEL DI SINI -->
    <h3>
      ğŸ“¢ Pengumuman Sensei
      <span id="badgeBaru" class="badge-baru">BARU</span>
    </h3>
    <!-- ğŸ”¼ SAMPAI SINI -->

    <p id="popupPengumumanText"></p>
    <small id="popupPengumumanWaktu"></small>

    <button onclick="tutupPopupPengumuman()">Mengerti</button>
  </div>
</div>

  <footer class="app-footer">
  <div class="footer-inner">
    <div class="footer-brand">
      ğŸ“˜ <strong>Manabu Mantappu</strong>
    </div>

    <div class="footer-desc">
      Platform belajar Bahasa Jepang  
      <br>JLPT â€¢ JFT â€¢ SSW
    </div>

    <div class="footer-meta">
      Â© <span id="footerYear"></span> Manabu Mantappu  
      <br>
      Dibuat dengan â¤ï¸ untuk siswa Indonesia
    </div>
  </div>
</footer>

 
 <!-- FIREBASE SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script src="app.js"></script>
</body>
</html>
